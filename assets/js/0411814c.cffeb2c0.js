"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[47],{8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var r=a(6540);const t={},s=r.createContext(t);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(s.Provider,{value:n},e.children)}},9988:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"backend/data/sql","title":"SQL","description":"Donn\xe9es de base pour la table permission","source":"@site/docs/backend/data/sql.md","sourceDirName":"backend/data","slug":"/backend/data/sql","permalink":"/docs/backend/data/sql","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend/data/sql.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udd17 Mod\xe8les relationnels","permalink":"/docs/backend/data/models"},"next":{"title":"Logic","permalink":"/docs/logic"}}');var t=a(4848),s=a(8453);const i={sidebar_position:2},o="SQL",l={},d=[{value:"Donn\xe9es de base pour la table permission",id:"donn\xe9es-de-base-pour-la-table-permission",level:2},{value:"Table role permission",id:"table-role-permission",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"sql",children:"SQL"})}),"\n",(0,t.jsx)(n.h2,{id:"donn\xe9es-de-base-pour-la-table-permission",children:"Donn\xe9es de base pour la table permission"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"\nINSERT INTO permissions (name, description) VALUES\n-- TRANSACTIONS\n('transactions.all', 'Full access to transactions module'),\n('transactions.view', 'View transactions'),\n('transactions.create', 'Create a transaction'),\n('transactions.update', 'Update a transaction'),\n('transactions.delete', 'Delete a transaction'),\n\n-- INVOICES\n('invoices.all', 'Full access to invoices module'),\n('invoices.view', 'View invoices'),\n('invoices.create', 'Create an invoice'),\n('invoices.update', 'Update an invoice'),\n('invoices.delete', 'Delete an invoice'),\n\n-- CARD\n('card.all', 'Full access to card module'),\n('card.view', 'View cards'),\n('card.create', 'Create a card'),\n('card.update', 'Update a card'),\n('card.delete', 'Delete a card'),\n\n-- REFERRALS\n('referrals.all', 'Full access to referrals module'),\n('referrals.view', 'View referrals'),\n('referrals.create', 'Create a referral'),\n('referrals.update', 'Update a referral'),\n('referrals.delete', 'Delete a referral'),\n\n-- USER\n('user.all', 'Full access to user module'),\n('user.view', 'View users'),\n('user.create', 'Create a user'),\n('user.update', 'Update a user'),\n('user.delete', 'Delete a user'),\n\n-- COMPANY\n('company.all', 'Full access to company module'),\n('company.view', 'View companies'),\n('company.create', 'Create a company'),\n('company.update', 'Update a company'),\n('company.delete', 'Delete a company'),\n\n-- PERSONAL_INFORMATION\n('personal_information.all', 'Full access to personal information module'),\n('personal_information.view', 'View personal information'),\n('personal_information.create', 'Create personal information'),\n('personal_information.update', 'Update personal information'),\n('personal_information.delete', 'Delete personal information'),\n\n-- AUDIT\n('audit.all', 'Full access to audit module'),\n('audit.view', 'View audits'),\n('audit.create', 'Create an audit entry'),\n('audit.update', 'Update an audit entry'),\n('audit.delete', 'Delete an audit entry'),\n\n-- GEOMAP\n('geomap.all', 'Full access to geomap module'),\n('geomap.view', 'View geomap data'),\n('geomap.create', 'Create geomap entry'),\n('geomap.update', 'Update geomap entry'),\n('geomap.delete', 'Delete geomap entry'),\n\n-- FIND_CARRIER\n('find_carrier.all', 'Full access to find carrier module'),\n('find_carrier.view', 'View carrier suggestions'),\n('find_carrier.create', 'Create carrier search'),\n('find_carrier.update', 'Update carrier preferences'),\n('find_carrier.delete', 'Delete carrier search'),\n\n-- AI\n('ai.all', 'Full access to AI module'),\n('ai.view', 'Use AI features'),\n('ai.create', 'Create AI queries'),\n('ai.update', 'Update AI settings'),\n('ai.delete', 'Delete AI data');\n\n"})}),"\n",(0,t.jsx)(n.h2,{id:"table-role-permission",children:"Table role permission"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id\nFROM roles r\nJOIN permissions p ON p.name LIKE '%.all'\nWHERE r.normalized_name IN (\n  'ADMIN_FINCARGO',\n  'ADMIN_CARRIER',\n  'ADMIN_FREIGHT_FORWARDER'\n)\n-- \xe9viter les doublons si la table a d\xe9j\xe0 des entr\xe9es\nAND NOT EXISTS (\n  SELECT 1\n  FROM role_permissions rp\n  WHERE rp.role_id = r.id AND rp.permission_id = p.id\n);\n\n\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);