"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[228],{4355:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"backend/logique-metier/creat_first_company","title":"\ud83d\udcc4 Processus de cr\xe9ation publique d\'une entreprise","description":"\ud83d\udd12 Acc\xe8s","source":"@site/docs/backend/logique-metier/creat_first_company.md","sourceDirName":"backend/logique-metier","slug":"/backend/logique-metier/creat_first_company","permalink":"/docs/backend/logique-metier/creat_first_company","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend/logique-metier/creat_first_company.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Logique M\xe9tier","permalink":"/docs/backend/logique-metier"},"next":{"title":"Frontend","permalink":"/docs/category/frontend"}}');var i=r(4848),t=r(8453);const d={sidebar_position:1},c="\ud83d\udcc4 Processus de cr\xe9ation publique d'une entreprise",l={},o=[{value:"\ud83d\udd12 Acc\xe8s",id:"-acc\xe8s",level:3},{value:"\ud83e\uddfe \xc9tapes de cr\xe9ation",id:"-\xe9tapes-de-cr\xe9ation",level:3},{value:"1. <strong>L&#39;utilisateur remplit un formulaire de cr\xe9ation</strong>",id:"1-lutilisateur-remplit-un-formulaire-de-cr\xe9ation",level:4},{value:"2. <strong>V\xe9rification</strong>",id:"2-v\xe9rification",level:4},{value:"3. <strong>Cr\xe9ation d\u2019une <code>BusinessPartner</code> avec statut <code>PRE_REGISTERED</code></strong>",id:"3-cr\xe9ation-dune-businesspartner-avec-statut-pre_registered",level:4},{value:"4. <strong>Cr\xe9ation d\u2019un <code>User</code> de type \u201cr\xe9f\xe9rent\u201d</strong>",id:"4-cr\xe9ation-dun-user-de-type-r\xe9f\xe9rent",level:4},{value:"5. <strong>Envoi d\u2019un email de confirmation</strong>",id:"5-envoi-dun-email-de-confirmation",level:4},{value:"\u2705 Objectifs m\xe9tier atteints",id:"-objectifs-m\xe9tier-atteints",level:3},{value:"\ud83d\udd04 Statuts pr\xe9vus \xe0 g\xe9rer",id:"-statuts-pr\xe9vus-\xe0-g\xe9rer",level:3}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"-processus-de-cr\xe9ation-publique-dune-entreprise",children:"\ud83d\udcc4 Processus de cr\xe9ation publique d'une entreprise"})}),"\n",(0,i.jsx)(n.h3,{id:"-acc\xe8s",children:"\ud83d\udd12 Acc\xe8s"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint public"})," (accessible sans authentification)"]}),"\n",(0,i.jsx)(n.li,{children:"But : enregistrer une nouvelle entreprise dont le num\xe9ro de TVA n'existe pas encore dans la base."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-\xe9tapes-de-cr\xe9ation",children:"\ud83e\uddfe \xc9tapes de cr\xe9ation"}),"\n",(0,i.jsxs)(n.h4,{id:"1-lutilisateur-remplit-un-formulaire-de-cr\xe9ation",children:["1. ",(0,i.jsx)(n.strong,{children:"L'utilisateur remplit un formulaire de cr\xe9ation"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Champs requis :"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Champ"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"company_name"})}),(0,i.jsx)(n.td,{children:"Nom de l'entreprise"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"vat_number"})}),(0,i.jsx)(n.td,{children:"Num\xe9ro de TVA (doit \xeatre unique)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"first_name"})}),(0,i.jsx)(n.td,{children:"Pr\xe9nom du r\xe9f\xe9rent"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"last_name"})}),(0,i.jsx)(n.td,{children:"Nom du r\xe9f\xe9rent"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"city"})}),(0,i.jsx)(n.td,{children:"Ville de l\u2019entreprise"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:"Adresse de l\u2019entreprise"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"postal_code"})}),(0,i.jsx)(n.td,{children:"Code postal de l\u2019entreprise"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"company_type"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"carrier"})," ou ",(0,i.jsx)(n.code,{children:"freight_forwarder"})]})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\ud83d\udce7 Aucun champ li\xe9 \xe0 l\u2019utilisateur (email, mot de passe, t\xe9l\xe9phone) n\u2019est encore fourni ici. Cela interviendra plus tard."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h4,{id:"2-v\xe9rification",children:["2. ",(0,i.jsx)(n.strong,{children:"V\xe9rification"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Si le ",(0,i.jsx)(n.code,{children:"vat_number"})," existe d\xe9j\xe0 \u2192 retour ",(0,i.jsx)(n.code,{children:"409 Conflict"})," avec message d\u2019erreur."]}),"\n",(0,i.jsx)(n.li,{children:"Sinon, on continue."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h4,{id:"3-cr\xe9ation-dune-businesspartner-avec-statut-pre_registered",children:["3. ",(0,i.jsxs)(n.strong,{children:["Cr\xe9ation d\u2019une ",(0,i.jsx)(n.code,{children:"BusinessPartner"})," avec statut ",(0,i.jsx)(n.code,{children:"PRE_REGISTERED"})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"INSERT INTO business_partners (...) VALUES (..., status = 'PRE_REGISTERED')\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h4,{id:"4-cr\xe9ation-dun-user-de-type-r\xe9f\xe9rent",children:["4. ",(0,i.jsxs)(n.strong,{children:["Cr\xe9ation d\u2019un ",(0,i.jsx)(n.code,{children:"User"})," de type \u201cr\xe9f\xe9rent\u201d"]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Cr\xe9\xe9 ",(0,i.jsx)(n.strong,{children:"sans mot de passe"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Son ",(0,i.jsx)(n.code,{children:"status_user"})," est aussi mis \xe0 ",(0,i.jsx)(n.code,{children:"PRE_REGISTERED"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Il est li\xe9 \xe0 l\u2019entreprise via ",(0,i.jsx)(n.code,{children:"UserBusinessPartner"})," avec :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"is_primary = True"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"r\xf4le par d\xe9faut selon le type d\u2019entreprise :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ADMIN_CARRIER"})," si ",(0,i.jsx)(n.code,{children:"company_type = carrier"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ADMIN_FREIGHTFORWARDER"})," si ",(0,i.jsx)(n.code,{children:"company_type = freight_forwarder"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h4,{id:"5-envoi-dun-email-de-confirmation",children:["5. ",(0,i.jsx)(n.strong,{children:"Envoi d\u2019un email de confirmation"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Contient un lien s\xe9curis\xe9 (ex: ",(0,i.jsx)(n.code,{children:"/complete-registration?token=xxx"}),") permettant au r\xe9f\xe9rent de :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"d\xe9finir un mot de passe"}),"\n",(0,i.jsx)(n.li,{children:"renseigner ses informations personnelles (email, t\xe9l\xe9phone, etc.)"}),"\n",(0,i.jsxs)(n.li,{children:["\xe9ventuellement ",(0,i.jsx)(n.strong,{children:"uploader les documents justificatifs"})," de l\u2019entreprise"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-objectifs-m\xe9tier-atteints",children:"\u2705 Objectifs m\xe9tier atteints"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Pas de cr\xe9ation de doublon de TVA"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Aucune authentification requise pour initier le process"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Contr\xf4le des r\xf4les par d\xe9faut"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Activation contr\xf4l\xe9e via validation d\u2019email"}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Statuts ",(0,i.jsx)(n.code,{children:"PRE_REGISTERED"}),' permettent de distinguer les entit\xe9s "en attente"']}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-statuts-pr\xe9vus-\xe0-g\xe9rer",children:"\ud83d\udd04 Statuts pr\xe9vus \xe0 g\xe9rer"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\xc9l\xe9ment"}),(0,i.jsx)(n.th,{children:"Statut"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"User.status_user"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PRE_REGISTERED"})}),(0,i.jsx)(n.td,{children:"Pas encore activ\xe9 ni mot de passe"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"APPROVED"})}),(0,i.jsx)(n.td,{children:"Utilisateur actif"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"REJECTED"})}),(0,i.jsx)(n.td,{children:"Refus\xe9 manuellement"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BusinessPartner.status"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PRE_REGISTERED"})}),(0,i.jsx)(n.td,{children:"Cr\xe9\xe9e mais documents manquants ou en validation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"APPROVED"})}),(0,i.jsx)(n.td,{children:"Soci\xe9t\xe9 valid\xe9e par le back-office"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"REJECTED"})}),(0,i.jsx)(n.td,{children:"Soci\xe9t\xe9 refus\xe9e"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>c});var s=r(6540);const i={},t=s.createContext(i);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);